<div class="contenedor-global">

    <div class="mensaje-error" *ngIf="mensajeError">

        <span>{{mensajeError}}</span>

    </div>


    <div class="mensaje-exito" *ngIf="mensajeExito">

        <span>{{mensajeExito}}</span>
    </div>


    <h2 class="titulo-principal">Actualiza tu password</h2>

    <div class="card-global">

        <div class="formulario">

            <form [formGroup]="formularioPassword" (ngSubmit)="mostrarelModalmasGood()">


                <div class="space-y-2">
                    <div class="relative group">
                      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-teal-500 transition-colors duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                        </svg>
                      </div>
                      <input
                        [type]="ocultarPassword ? 'text' : 'password' "
                        id="password"
                        formControlName="password"
                        class="w-full pl-10 pr-12 py-3 rounded-lg border-2 border-teal-200 bg-white/80 hover:bg-white/90 focus:bg-white focus:ring-2 focus:ring-teal-500 focus:border-teal-500 block transition-all duration-300 ease-in-out backdrop-blur-sm text-gray-800 placeholder-gray-500 hover:scale-[1.02] hover:shadow-lg"
                        [ngClass]="{'border-red-500 focus:ring-red-500 focus:border-red-500': formularioPassword.get('password')?.invalid && formularioPassword.get('password')?.touched,
                                  'border-teal-300 shadow-sm shadow-teal-100': !(formularioPassword.get('password')?.invalid && formularioPassword.get('password')?.touched)}"
                        placeholder="Contraseña (4-20 caracteres)"
                      />
      
                      <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                        <button
                          type="button"
                          (click)="mostraroNoPassword()"
                          class="text-teal-600 hover:text-teal-800 transition-colors duration-300 focus:outline-none"
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                            <path *ngIf="!ocultarPassword" stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path *ngIf="!ocultarPassword" stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            <path *ngIf="ocultarPassword" stroke-linecap="round" stroke-linejoin="round" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                          </svg>
                        </button>
                      </div>
                    </div>
                    <div class="text-sm text-red-500 h-5 animate-[fadeInUp_0.3s_ease-out]" *ngIf="formularioPassword.get('password')?.invalid && formularioPassword.get('password')?.touched">
                      <span *ngIf="formularioPassword.get('password')?.errors?.['required']" class="flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                        </svg>
                        La contraseña es necesaria
                      </span>
                      <span *ngIf="formularioPassword.get('password')?.errors?.['minlength']" class="flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                        </svg>
                        La contraseña debe tener al menos 4 caracteres
                      </span>

                      <span *ngIf="formularioPassword.get('password')?.errors?.['maxlength']" class="flex items-center gap-1">

                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                          </svg>

                          El password debe tener como maximo 20 caracteres

                      </span>
                    </div>
                  </div>



                  <div class="space-y-2">
                    <div class="relative group">
                      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-teal-500 transition-colors duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                        </svg>
                      </div>
                      <input
                        [type]="ocultarPassword ? 'text' : 'password' "
                        id="confirmarPassword"
                        formControlName="confirmarPassword"
                        class="w-full pl-10 pr-12 py-3 rounded-lg border-2 border-teal-200 bg-white/80 hover:bg-white/90 focus:bg-white focus:ring-2 focus:ring-teal-500 focus:border-teal-500 block transition-all duration-300 ease-in-out backdrop-blur-sm text-gray-800 placeholder-gray-500 hover:scale-[1.02] hover:shadow-lg"
                        [ngClass]="{'border-red-500 focus:ring-red-500 focus:border-red-500': formularioPassword.get('confirmarPassword')?.invalid && formularioPassword.get('confirmarPassword')?.touched,
                                  'border-teal-300 shadow-sm shadow-teal-100': !(formularioPassword.get('confirmarPassword')?.invalid && formularioPassword.get('confirmarPassword')?.touched)}"
                        placeholder="Contraseña (4-20 caracteres)"
                      />
      
                      <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                        <button
                          type="button"
                          (click)="mostraroNoPassword()"
                          class="text-teal-600 hover:text-teal-800 transition-colors duration-300 focus:outline-none"
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                            <path *ngIf="!ocultarPassword" stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path *ngIf="!ocultarPassword" stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                            <path *ngIf="ocultarPassword" stroke-linecap="round" stroke-linejoin="round" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                          </svg>
                        </button>
                      </div>
                    </div>
                    <div class="text-sm text-red-500 h-5 animate-[fadeInUp_0.3s_ease-out]" *ngIf="formularioPassword.get('password')?.invalid && formularioPassword.get('password')?.touched">
                      <span *ngIf="formularioPassword.get('confirmarPassword')?.errors?.['required']" class="flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                        </svg>
                        La contraseña es necesaria
                      </span>
                      <span *ngIf="formularioPassword.get('confirmarPassword')?.errors?.['minlength']" class="flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                        </svg>
                        La contraseña debe tener al menos 4 caracteres
                      </span>

                      <span *ngIf="formularioPassword.get('confirmarPassword')?.errors?.['maxlength']" class="flex items-center gap-1">

                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                          </svg>

                          El password debe tener como maximo 20 caracteres

                      </span>
                    </div>
                  </div>



                  <div class="acciones">
                    <button 
                      type="submit" 
                      class="boton-guardar" 
                      [disabled]="estaCargando">
                      <span *ngIf="!estaCargando">Guardar cambios</span>
                      <span *ngIf="estaCargando" class="cargando"></span>
                    </button>
    
    
    
                  </div>



            </form>




        </div>






    </div>


    <div class="modal-overlay" *ngIf="mostrarModal">

        <div class="modal">
            <h3>Confirma tu actualizacion de datos</h3>
            <p>Seguro que quieres modificar tus datos no te falto algo mas por actualizar?</p>

            <div class="botones-modal">

                <button class="boton-cancelar" (click)="mostrarModal= false">No Master ya me arrepenti</button>

                <button class="boton-aceptar" (click)="confirmarModal()">Adelante master estoy 100% seguro</button>

            </div>

        </div>


    </div>




</div>